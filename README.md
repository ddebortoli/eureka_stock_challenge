# Challenge requirements
# Stock Market API Service

Expose an API endpoint where I can POST my data and sign up for an API key that will be used later.

Expose an API endpoint where I can hit and get stock market information, as a security mechanism use the API key obtained previously in order to validate user and make sure that no authorized user will consume the service (use request header for that purpose). 

Here are some examples of stock symbols
- Facebook (META)
- Apple (AAPL)
- Microsoft (MSFT)
- Google (GOOGL)
- Amazon (AMZN)

The system will make use of a web service called Alpha Vantage, this will provide stock market information.

Information that will be retrieved in the response of the service as json format will contain:
- Open price
- Higher price
- Lower price
- Variation between last 2 closing price values.

**Alpha Vantage API**
```
https://www.alphavantage.co/documentation/
API Key: X86NOH6II01P7R24
```

API call sample to get stock prices from Facebook:

`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=META&outputsize=compact&apikey=X86NOH6II01P7R24`

**Considerations:**
- API URL structure is up to you.
- Initial data for sign up: name, last name, email.
- Validation rules for signup data are up to you.
- Json structure is up to you.
- It will be a big plus if you deploy the services somewhere in the cloud (heroku, gcloud, aws, azure, etc). It's ok if you just do it locally.
- Use github (or other git repo).
- Programming language: Python.
- BONUS: If you can implement API throttling, that's a big one. Throttling rules are up to you (1 API call per second allowed or 10 API calls per minute, etc).
- Log every API call received, log format is up to you.
- Place a README.md file with instructions in the github repo so test can be performed and checked.

# Solution

API with basic user system and call to alphavantage web service.


## Steps to execute

1. create virtual env with python 3.11
2. pip install -r requirements.txt
3. insert into variables.py your apikey
4. execute encript.py in order to encrypt that file and delete variables.py or delete the apikey
5. protect the generated keys if deploying in production, else if you are testing you can let them there.
6. execute python server.py

## Getting Started

### Dependencies

* Requirements.txt


## Help

Contact me to:
mail:damiandebortolilb@gmail.com
LinkedIn: https://www.linkedin.com/in/damian-debortoli/
## Authors

https://www.linkedin.com/in/damian-debortoli/


# Endpoints:
/api/user
POST Create user:
Bearer token Authorization required: The database has a table named "users" which doesn't have an endpoint to create new users, you have to insert them manually.
The idea is that only an admin can create new users. 

Body:
{
    "first_name": "str",
    "last_name": "str",
    "email": "str(unique)"
}

if sucess:
    user api key returned
if failure:
    error description

/api/stock
GET stock:
header api-key authorization required: Every created user has an apikey generated by uuid at the creation moment.

params:
symbol: stock symbol
output_size: compact, full
mock_data(optional): alphavantage has an limit of 25 api calls per day so if that limit is reached you should use mock data to use a mocked response from that endpoint. Send True or any other value to enable this option.

if sucess:
    {
        "Meta Data": {
            "1. Information": "Intraday (5min) open, high, low, close prices and volume",
            "2. Symbol": "IBM",
            "3. Last Refreshed": "2024-06-04 19:55:00",
            "4. Interval": "5min",
            "5. Output Size": "Compact",
            "6. Time Zone": "US/Eastern"
        },
        "Time Series (5min)": {
            "2024-06-04 19:55:00": {
                "1. open": "165.8400",
                "2. high": "166.0000",
                "3. low": "165.8400",
                "4. close": "165.8400",
                "5. volume": "59"
            },
        }
    }
if failure:
    error description.
